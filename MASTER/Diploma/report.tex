\documentclass[12pt]{article}
\usepackage[russian]{babel}
\usepackage[utf8x]{inputenc}
\usepackage{amssymb}
\usepackage{amsmath}
\usepackage{graphicx}
\usepackage[margin=.8in]{geometry}
\usepackage[colorinlistoftodos]{todonotes}
\usepackage{listings}
\usepackage[section]{placeins}
\usepackage[T1]{fontenc}
\begin{document}

\title{Возможности построения реальных сенсорных сетей}
\author{Андрей Валиков}
\date{}
\maketitle

\section{Цель}

Исследование характеристик реальных сенсорных сетей. На данный момент конкретное направление исследования не выбрано, поскольку продолжается изучение возможностей модуля. Возможными целями могут стать:

\begin{itemize}

\item Увеличение время жизни сети (снижение энергопотребления)

\item При каком максимальном коичестве участников сеть остаётся стабильной

\item В целом, оценка параметров сети.

\end{itemize}

\section{Описание возможностей модуля}

\begin{itemize}

\item HC-11 - беспроводной модуль, работающий на частоте 434 МГц.

\item Пользователю не нужно программировать модуль, только четыре режима отвечают за прием и отправку данных последовательного порта.

\item Низкое потребление тока: 80 мкА, 3.5 мA, 22 мA, в зависимости от выбранного режима.

\item Неограниченное число байтов, передаваемое одновременно (но часть может быть потеряна)


\item Все параметры сохраняются в памяти даже в случае отключения питания.


\item Рабочее напряжение: 3.3 - 5В

\end{itemize}

\section{Режимы функционирования}

\begin{itemize}

\item \textbf{FU1 Стандартный режим }
   
Потребление тока: $3.4mA$.

\item \textbf{FU2 Максимальное энергосбережение}

Задержка сигнала: $400ms$
  
Скорость передачи (симв.): $1200, 2400, 4800$
 
Потребление тока: $80\mu A$

\item \textbf{FU3 Максимальная скорость}

Задержка сигнала: $< 10 ms$ 

Потребление тока: $23 mA$.

\item \textbf{FU4 Максимальное расстояние}

Задержка сигнала: $>300ms$ 

Скорость передачи (симв.): $9,600$ 

Потребление тока: $22mA$.

\end{itemize}


\section{Команды}


В скобках указаны переменные


\begin{enumerate}

\item \textbf{AT}

Тестовая команда. Если всё нормально, модуль возвращает OK.

\begin{tabular}{ l r }
  Отправляем: & AT \\
  Получаем: & OK \\
\end{tabular}


\item \textbf{ AT+A(000-255)}

Меняет адрес модуля в указанном диапазоне.

\begin{tabular}{ l l }
  Отправляем: & AT+A012 \\
  Получаем: & OK-A012 \\
\end{tabular}


\item \textbf{ AT+B(1200 | 2400 | 4800 | 9600 | 19200 | 38400 | 57600 | 115200)}

Меняет скорость (baud rate) на одно из допустимых значений (указаны выше).

\begin{tabular}{ l l }
  Отправляем: & AT+B19200 \\
  Получаем: & OK-B19200 \\
\end{tabular}


\item \textbf{ AT+C(001-127)}

Меняет канал беспроводного соединения. Нули перед числами обязательны. Если значение слишком большое, данные могут быть потеряны. Так что, на самом деле доступны каналы $001-020$.


\begin{tabular}{ l l }
  Отправляем: & AT+C015 \\
  Получаем: & OK-C015 \\
\end{tabular}


\item \textbf{AT+E(A | B | C)(соответствующие числа)}

Эта команда используется для управления удалённым модулем.

\begin{itemize}
\item Первый параметр - три выше описанные команды (адрес (A), скорость (B) и канал (C) соответственно)
\item Второй - значение, которое мы хотим присвоить выбранному параметру
\end{itemize} 


Возвращаемые значения:

\begin{tabular}{ l l }
  Успех: & \\
  E(A | B | C)R & успех \\
\end{tabular}

\begin{tabular}{ l l }
  Ошибки: & \\
  E(A | B | C)E & ошибка параметра \\
  E(A | B | C)F & ошибка команды \\
  Fail & ошибка соединения \\
\end{tabular}

\textbf{Пример 1}

Устанавливаем адрес удалённого модуля в $050$

\begin{tabular}{ l l }
  Отправляем: & AT+EA050 \\
  Получаем: & OK-EBR \\
\end{tabular}

\textbf{Пример 2}

Устанавливаем скорость удалённого модуля в $4800$

\begin{tabular}{ l l }
  Отправляем: & AT+EB4800 \\
  Получаем: & OK-EBR \\
\end{tabular}

\item \textbf{ AT+FC(M | S)(F | T) }

Устанавливает модуль в режим IO управления.

Первый параметр:
\begin{itemize}
\item M - управляюший
\item S - управляемый 
\end{itemize}

Второй
\begin{itemize}
\item F - повторяющий
\item T - обратный
\end{itemize}

\begin{tabular}{ l l }
  Один модуль отправляет: & AT+FCMT, чтобы стать управляющим \\
  Другой отправляет: & AT+FCST, чтобы стать управляемым \\
\end{tabular}


\item \textbf{AT+FU(1-4)}

Переключает в один из режимов, описанных выше.

\begin{tabular}{ l l }
  Отправляем: & AT+FU1 \\
  Получаем: & OK-FU1 \\
\end{tabular}


\item \textbf{AT+GDPCxAx}

Устаревшая команда.
  
\item \textbf{AT+P(1-8)}

Устанавливает мощность передатчика

\begin{tabular}{ l l }
  Отправляем: & AT+P6 \\
  Получаем: & OK-P6 \\
\end{tabular}

  
\item \textbf{AT+R(A | B | C | P)}

Получает значение одного из параметров

\begin{tabular}{ l l }
  Отправляем: & AT+RB \\
  Получаем: & B9600 \\
\end{tabular}

\begin{tabular}{ l l }
  Отправляем: & AT+RA \\
  Получаем: & A001 \\
\end{tabular}


\item \textbf{AT+U(N | O | E)(1 | 2 | 3)}

Устанавливает бит проверки данных и бит завершения последовательного порта.

Первый параметр:

\begin{itemize}
\item N - нет проверки
\item O - нечётный
\item E - чётный 

\end{itemize}

Второй параметр:
\begin{itemize}
\item 1 - стоп-бит
\item 2 - 2 бита
\item 3 - 1.5 бита

\end{itemize}

\begin{tabular}{ l l }
  Отправляем: & AT+UO2 \\
  Получаем: & UO2 \\
\end{tabular}

  
\item \textbf{AT+RX}

Получает значения всех параметров модуля:  
режим последовательного порта / скорость / канал / адрес / мощность 

\begin{tabular}{ l l }
  Отправляем: & AT+RX \\
  Получаем: & U1 B9600 C001 A000 P8 \\
\end{tabular}

\item \textbf{AT+V}

Получает версию прошивки.

\begin{tabular}{ l l }
  Отправляем: & AT+V \\
  Получаем: & HC-11\_V1.3\\
\end{tabular}



\item \textbf{AT+SLEEP}

Переводит модуль в спящий режим после выхода из AT. В этом режиме не возможна передача данных. Чтобы выйти из спящего режима, нужно войти в AT ещё раз. Эта команда доступна с версии $1.8$.

Потребление тока: $20 \mu A$.

\begin{tabular}{ l l }
  Отправляем: & AT+SLEEP \\
  Получаем: & OK\\
\end{tabular}



\item \textbf{AT+RESET}

Сбрасывает последовательный порт, канал и адрес в стандартные значения.

\begin{tabular}{ l l }
  Отправляем: & AT+RESET \\
  Получаем: & RESET\_OK\\
\end{tabular}


\item \textbf{AT+IV}

Получает версию внутреннего кода управления. Команда доступна с версии $1.9$

\begin{tabular}{ l l }
  Отправляем: & AT+IV \\
  Получаем: & I1\\
\end{tabular}


\item \textbf{AT+UPDATE}

Переводит модуль в режим ожидания обновления.
После отправки команды модуль не будет отвечать на команды до перезагрузки.
После того как контроллер последовательного порта отправит команду, закройте последовательный порт, выберите файл в помощнике обновления HC-11, откройте последовательный порт. Затем модуль сможет обновиться

\end{enumerate}

\section{Рекомендации}

Если расстояние между модулями слишком маленькое (меньше 50 см), стоит установить мощность передачи небольшой (P1 - P3). Иначе, передача будет перенасыщена и соединение не удастся. Если расстояние составляет несколько сантиметров, передача, вероятно, не получится.


\section{Вывод}

Большое количество настроек (адрес, канал, скорость) и четыре режима позволяют предположить широкие вохможности модуля HC-11 для создания сенсорных сетей:
 
\begin{itemize}
\item Распределённых на большое расстояние (режим FU4)
\item Имеющих большое кол-во участников на единицу площади (20 каналов и 255 адресов)
\item Требующих высокой скорости передачи (режим FU3)

\item Сильно ограниченных по запасу энергии (режим FU2 и спящий режим)

\end{itemize}

\end{document}
